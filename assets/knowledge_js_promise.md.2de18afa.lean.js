import{o as u,c as g,b as t,u as c,a as B}from"./app.811b5c72.js";Promise.all=a=>{const n=[];let l=0;return new Promise((o,e)=>{a.forEach((s,p)=>{Promise.resolve(s).then(r=>{n[p]=r,++l===a.length&&o(n)}).catch(e)})})};Promise.race=a=>new Promise((n,l)=>{a.forEach(o=>Promise.resolve(o).then(n,l))});Promise.any=a=>{const n=[];let l=0;return new Promise((o,e)=>{a.forEach((s,p)=>{Promise.resolve(s).then(o,r=>{n[p]=r,++l===a.length&&e(new AggregateError(n))})})})};Promise.allSettled=a=>{const n=[];let l=0;return new Promise((o,e)=>{a.forEach((s,p)=>{Promise.resolve(s).then(r=>{n.push({status:"fulfilled",value:r})}).catch(r=>{n.push({status:"rejected",reason:r})}).finally(r=>{++l===a.length&&o(n)})})})};function i(){const a=Promise.resolve("p1"),n=new Promise((s,p)=>{setTimeout(()=>{s("p2 \u5EF6\u65F6\u4E00\u79D2")},1e3)}),l=new Promise((s,p)=>{setTimeout(()=>{s("p3 \u5EF6\u65F6\u4E24\u79D2")},2e3)}),o=Promise.reject("p4 rejected"),e=new Promise((s,p)=>{setTimeout(()=>{p("p5 rejected \u5EF6\u65F61.5\u79D2")},1500)});return[a,n,l,o,e]}function A(){console.log("---------------- Promise.all ---------------------");const[a,n,l,o,e]=i();Promise.all([a,n,l]).then(s=>{console.log(s)}).catch(s=>console.log(s)),Promise.all([a,n,o]).then(s=>{console.log(s)}).catch(s=>console.log(s)),Promise.all([a,n,e]).then(s=>{console.log(s)}).catch(s=>console.log(s)),Promise.all([a,o,e]).then(s=>{console.log(s)}).catch(s=>console.log(s))}function C(){console.log("---------------- Promise.race ---------------------");const[a,n,l,o,e]=i();Promise.race([a,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.race([o,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.race([e,n,l]).then(s=>console.log(s)).catch(s=>console.log(s))}function h(){console.log("---------------- Promise.any ---------------------");const[a,n,l,o,e]=i();Promise.any([a,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.any([a,n,o]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.any([n,o,e]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.any([o,e]).then(s=>console.log(s)).catch(s=>console.log(s))}function d(){console.log("---------------- Promise.allSettled ---------------------");const[a,n,l,o,e]=i();Promise.allSettled([a,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.allSettled([a,n,o]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.allSettled([o,e]).then(s=>console.log(s)).catch(s=>console.log(s))}const y="pending",m="fulfilled",E="rejected";class F{constructor(n){this.value=null,this.reason=null,this.status=y,this.onFulfilledCallbacks=[],this.onRejectedCallbacks=[],this.resolve=l=>{if(this.status===y)for(this.value=l,this.status=m;this.onFulfilledCallbacks.length;)this.onFulfilledCallbacks.shift()(l)},this.reject=l=>{if(this.status===y)for(this.reason=l,this.status=E;this.onRejectedCallbacks.length;)this.onRejectedCallbacks.shift()(val)},n(this.resolve,this.reject)}then(n,l){debugger;return new F((e,s)=>{if(this.status===m){const p=n(this.value);P(p,e,s)}else this.status===E?l(this.reason):this.status===y&&(this.onFulfilledCallbacks.push(n),this.onRejectedCallbacks.push(l))})}}function P(a,n,l){a instanceof F?a.then(n,l):n(a)}function D(){new F((n,l)=>{setTimeout(()=>{n(!0)},1e3)}).then(n=>(console.log(1),console.log("resolve",n),222)).then(n=>{console.log(2),console.log("resolve",n)})}D();const _=B("",7),f=B("",3),v=B("",3),j=B("",3),b=B("",3),k=JSON.parse('{"title":"Promise","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u539F\u7406","slug":"\u539F\u7406","link":"#\u539F\u7406","children":[]},{"level":2,"title":"Promise.resolve","slug":"promise-resolve","link":"#promise-resolve","children":[]},{"level":2,"title":"Promise.all","slug":"promise-all","link":"#promise-all","children":[]},{"level":2,"title":"Promise.race","slug":"promise-race","link":"#promise-race","children":[]},{"level":2,"title":"Promise.any","slug":"promise-any","link":"#promise-any","children":[]},{"level":2,"title":"Promise.allSettled","slug":"promise-allsettled","link":"#promise-allsettled","children":[]},{"level":2,"title":"\u53C2\u8003","slug":"\u53C2\u8003","link":"#\u53C2\u8003","children":[]}],"relativePath":"knowledge/js/promise.md"}'),T={name:"knowledge/js/promise.md"},w=Object.assign(T,{setup(a){return(n,l)=>(u(),g("div",null,[_,t("p",null,[t("button",{class:"brand-c-button",onClick:l[0]||(l[0]=(...o)=>c(A)&&c(A)(...o))},"runPromiseAll")]),f,t("p",null,[t("button",{class:"brand-c-button",onClick:l[1]||(l[1]=(...o)=>c(C)&&c(C)(...o))},"runPromiseRace")]),v,t("p",null,[t("button",{class:"brand-c-button",onClick:l[2]||(l[2]=(...o)=>c(h)&&c(h)(...o))},"runPromiseAny")]),j,t("p",null,[t("button",{class:"brand-c-button",onClick:l[3]||(l[3]=(...o)=>c(d)&&c(d)(...o))},"runPromiseAllSettled")]),b]))}});export{k as __pageData,w as default};
