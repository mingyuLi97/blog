import{_ as s,o as a,c as l,Q as n}from"./chunks/framework.f14b72c3.js";const u=JSON.parse('{"title":"keep-alive","description":"","frontmatter":{},"headers":[],"relativePath":"knowledge/vue/keepalive.md"}'),e={name:"knowledge/vue/keepalive.md"},o=n(`<h1 id="keep-alive" tabindex="-1">keep-alive <a class="header-anchor" href="#keep-alive" aria-label="Permalink to &quot;keep-alive&quot;">​</a></h1><p>默认情况下，一个组件实例在被替换掉（切走）后会被销毁。在一些情况下我们需要组件被“切走”的情况下保留他们的状态， 要解决这个问题就可以用 <code>&lt;KeepAlive&gt;</code> 组件将其包裹, <code>&lt;KeepAlive&gt;</code> 是 Vue 中内置的组件，被缓存的组件存放在内存中，防止重复渲染</p><h2 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h2><p><code>&lt;KeepAlive&gt;</code> 默认会缓存内部的所有组件实例，但我们可以通过 <code>include</code> 和 <code>exclude</code> 来定制该行为。</p><h4 id="prop" tabindex="-1">Prop <a class="header-anchor" href="#prop" aria-label="Permalink to &quot;Prop&quot;">​</a></h4><ul><li><code>include</code>：名称匹配的组件会被缓存，英文逗号分隔的字符串、一个正则表达式，或是包含这两种类型的一个数组。</li><li><code>exclude</code>：名称匹配的组件都不会被缓存，英文逗号分隔的字符串、一个正则表达式，或是包含这两种类型的一个数组。</li><li><code>max</code>：最多可以缓存多少组件实例, 超出的时候会删除最久没有访问过的实例（<a href="./../../design/leetcode/LRU.html">LRU 算法</a>）</li></ul><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- 以英文逗号分隔的字符串 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">KeepAlive</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">include</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;a,b&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:is</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;view&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">KeepAlive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- 正则表达式 (需使用 \`v-bind\`) --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">KeepAlive</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:exclude</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/a|b/&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:is</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;view&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">KeepAlive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- 数组 (需使用 \`v-bind\`) --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">KeepAlive</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:include</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;[&#39;a&#39;, &#39;b&#39;]&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:max</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;10&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:is</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;view&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">KeepAlive</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre></div><h2 id="生命周期" tabindex="-1">生命周期 <a class="header-anchor" href="#生命周期" aria-label="Permalink to &quot;生命周期&quot;">​</a></h2><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">activated</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 在首次挂载、</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 以及每次从缓存中被重新插入的时候调用</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">deactivated</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 在从 DOM 上移除、进入缓存</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 以及组件卸载时调用</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://cn.vuejs.org/guide/built-ins/keep-alive.html#basic-usage" target="_blank" rel="noreferrer">Vue.js 官网</a></li><li><a href="https://www.bilibili.com/video/BV1mR4y1w7cU?p=34&amp;vd_source=90f72d18968e9c13d70200bc4fd4291e" target="_blank" rel="noreferrer">珠峰源码分析</a></li><li><a href="https://ustbhuangyi.github.io/vue-analysis/v2/extend/keep-alive.html#%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93" target="_blank" rel="noreferrer">Vue.js 技术揭秘</a></li></ul>`,11),p=[o];function t(c,r,B,i,y,d){return a(),l("div",null,p)}const F=s(e,[["render",t]]);export{u as __pageData,F as default};
