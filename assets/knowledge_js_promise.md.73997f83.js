import{o as u,c as g,a as t,u as c,d as B}from"./app.a1fe4047.js";Promise.all=a=>{const n=[];let l=0;return new Promise((o,e)=>{a.forEach((s,p)=>{Promise.resolve(s).then(r=>{n[p]=r,++l===a.length&&o(n)}).catch(e)})})};Promise.race=a=>new Promise((n,l)=>{a.forEach(o=>Promise.resolve(o).then(n,l))});Promise.any=a=>{const n=[];let l=0;return new Promise((o,e)=>{a.forEach((s,p)=>{Promise.resolve(s).then(o,r=>{n[p]=r,++l===a.length&&e(new AggregateError(n))})})})};Promise.allSettled=a=>{const n=[];let l=0;return new Promise((o,e)=>{a.forEach((s,p)=>{Promise.resolve(s).then(r=>{n.push({status:"fulfilled",value:r})}).catch(r=>{n.push({status:"rejected",reason:r})}).finally(r=>{++l===a.length&&o(n)})})})};function i(){const a=Promise.resolve("p1"),n=new Promise((s,p)=>{setTimeout(()=>{s("p2 \u5EF6\u65F6\u4E00\u79D2")},1e3)}),l=new Promise((s,p)=>{setTimeout(()=>{s("p3 \u5EF6\u65F6\u4E24\u79D2")},2e3)}),o=Promise.reject("p4 rejected"),e=new Promise((s,p)=>{setTimeout(()=>{p("p5 rejected \u5EF6\u65F61.5\u79D2")},1500)});return[a,n,l,o,e]}function A(){console.log("---------------- Promise.all ---------------------");const[a,n,l,o,e]=i();Promise.all([a,n,l]).then(s=>{console.log(s)}).catch(s=>console.log(s)),Promise.all([a,n,o]).then(s=>{console.log(s)}).catch(s=>console.log(s)),Promise.all([a,n,e]).then(s=>{console.log(s)}).catch(s=>console.log(s)),Promise.all([a,o,e]).then(s=>{console.log(s)}).catch(s=>console.log(s))}function C(){console.log("---------------- Promise.race ---------------------");const[a,n,l,o,e]=i();Promise.race([a,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.race([o,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.race([e,n,l]).then(s=>console.log(s)).catch(s=>console.log(s))}function h(){console.log("---------------- Promise.any ---------------------");const[a,n,l,o,e]=i();Promise.any([a,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.any([a,n,o]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.any([n,o,e]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.any([o,e]).then(s=>console.log(s)).catch(s=>console.log(s))}function d(){console.log("---------------- Promise.allSettled ---------------------");const[a,n,l,o,e]=i();Promise.allSettled([a,n,l]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.allSettled([a,n,o]).then(s=>console.log(s)).catch(s=>console.log(s)),Promise.allSettled([o,e]).then(s=>console.log(s)).catch(s=>console.log(s))}const y="pending",m="fulfilled",E="rejected";class F{constructor(n){this.value=null,this.reason=null,this.status=y,this.onFulfilledCallbacks=[],this.onRejectedCallbacks=[],this.resolve=l=>{if(this.status===y)for(this.value=l,this.status=m;this.onFulfilledCallbacks.length;)this.onFulfilledCallbacks.shift()(l)},this.reject=l=>{if(this.status===y)for(this.reason=l,this.status=E;this.onRejectedCallbacks.length;)this.onRejectedCallbacks.shift()(val)},n(this.resolve,this.reject)}then(n,l){debugger;return new F((e,s)=>{if(this.status===m){const p=n(this.value);P(p,e,s)}else this.status===E?l(this.reason):this.status===y&&(this.onFulfilledCallbacks.push(n),this.onRejectedCallbacks.push(l))})}}function P(a,n,l){a instanceof F?a.then(n,l):n(a)}function D(){new F((n,l)=>{setTimeout(()=>{n(!0)},1e3)}).then(n=>(console.log(1),console.log("resolve",n),222)).then(n=>{console.log(2),console.log("resolve",n)})}D();const _=B('<h1 id="promise" tabindex="-1">Promise <a class="header-anchor" href="#promise" aria-hidden="true">#</a></h1><h2 id="\u539F\u7406" tabindex="-1">\u539F\u7406 <a class="header-anchor" href="#\u539F\u7406" aria-hidden="true">#</a></h2><ol><li><p>Promise \u662F\u4E00\u4E2A\u7C7B\uFF0C\u5728\u6267\u884C\u8FD9\u4E2A\u7C7B\u7684\u65F6\u5019\u4F1A\u4F20\u5165\u4E00\u4E2A\u6267\u884C\u5668\uFF0C\u8FD9\u4E2A\u6267\u884C\u5668\u4F1A\u7ACB\u5373\u6267\u884C</p></li><li><p>Promise \u4F1A\u6709\u4E09\u79CD\u72B6\u6001</p><ul><li>Pending \u7B49\u5F85</li><li>Fulfilled \u5B8C\u6210</li><li>Rejected \u5931\u8D25</li></ul></li><li><p>\u72B6\u6001\u53EA\u80FD\u7531 Pending --&gt; Fulfilled \u6216\u8005 Pending --&gt; Rejected\uFF0C\u4E14\u4E00\u4F46\u53D1\u751F\u6539\u53D8\u4FBF\u4E0D\u53EF\u4E8C\u6B21\u4FEE\u6539\uFF1B</p></li><li><p>Promise \u4E2D\u4F7F\u7528 resolve \u548C reject \u4E24\u4E2A\u51FD\u6570\u6765\u66F4\u6539\u72B6\u6001\uFF1B</p></li><li><p>then \u65B9\u6CD5\u5185\u90E8\u505A\u4F46\u4E8B\u60C5\u5C31\u662F\u72B6\u6001\u5224\u65AD</p><ul><li>\u5982\u679C\u72B6\u6001\u662F\u6210\u529F\uFF0C\u8C03\u7528\u6210\u529F\u56DE\u8C03\u51FD\u6570</li><li>\u5982\u679C\u72B6\u6001\u662F\u5931\u8D25\uFF0C\u8C03\u7528\u5931\u8D25\u56DE\u8C03\u51FD\u6570</li></ul></li></ol><h2 id="promise-resolve" tabindex="-1">Promise.resolve <a class="header-anchor" href="#promise-resolve" aria-hidden="true">#</a></h2><ol><li><code>Promise.resolve(42)</code> \u76F8\u5F53\u4E8E <code>new Promise(function(resolve){ resolve(42); });</code></li><li>\u5C06 thenable \u5BF9\u8C61\u8F6C\u6362\u4E3A Promise \u5BF9\u8C61</li></ol><h2 id="promise-all" tabindex="-1">Promise.all <a class="header-anchor" href="#promise-all" aria-hidden="true">#</a></h2><ol><li>\u53C2\u6570\u4E3A <code>Promise&lt;any&gt;[]</code></li><li>\u8FD4\u56DE\u503C\u8FD8\u662F\u4E00\u4E2A Promise \u5BF9\u8C61</li><li>\u53EA\u8981\u6709\u4E00\u4E2A\u5931\u8D25\uFF0CPromise.all \u5C31\u4F1A\u6267\u884C <code>reject()</code></li></ol>',7),f=B(`<div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#7F848E;">/**</span></span>
<span class="line"><span style="color:#7F848E;"> * </span><span style="color:#C678DD;">@param</span><span style="color:#7F848E;"> </span><span style="color:#E5C07B;">{Promise[]}</span><span style="color:#7F848E;"> </span><span style="color:#E06C75;">promises</span></span>
<span class="line"><span style="color:#7F848E;"> */</span></span>
<span class="line"><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">all</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">promises</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">idx</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;">//</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">idx</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre></div><h2 id="promise-race" tabindex="-1">Promise.race <a class="header-anchor" href="#promise-race" aria-hidden="true">#</a></h2><ol><li>\u53C2\u6570\u4E3A <code>Promise&lt;any&gt;[]</code></li><li>\u91C7\u7528\u7B2C\u4E00\u4E2A\u5B8C\u6210\u4E86\u7684(resolve or reject) Promise \u7684\u503C</li></ol>`,3),v=B(`<div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">race</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">promises</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre></div><h2 id="promise-any" tabindex="-1">Promise.any <a class="header-anchor" href="#promise-any" aria-hidden="true">#</a></h2><p>\u4E0E Promise.all \u53EF\u4EE5\u770B\u505A\u662F\u76F8\u53CD\u7684\u3002Promise.any \u4E2D\u53EA\u8981\u6709\u4E00\u4E2A Promise \u5B9E\u4F8B\u6210\u529F\u5C31\u6210\u529F\uFF0C\u53EA\u6709\u5F53\u6240\u6709\u7684 Promise \u5B9E\u4F8B\u5931\u8D25\u65F6 Promise.any \u624D\u5931\u8D25\uFF0C\u6B64\u65F6 Promise.any \u4F1A\u628A\u6240\u6709\u7684\u5931\u8D25/\u9519\u8BEF\u96C6\u5408\u5728\u4E00\u8D77\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5931\u8D25\u7684 \xA0promise\xA0 \u548C AggregateError \u7C7B\u578B\u7684\u5B9E\u4F8B</p>`,3),j=B(`<div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">any</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">promises</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">errs</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">idx</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">errs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">idx</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">AggregateError</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">errs</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre></div><h2 id="promise-allsettled" tabindex="-1">Promise.allSettled <a class="header-anchor" href="#promise-allsettled" aria-hidden="true">#</a></h2><ol><li>\u53C2\u6570\u4E3A <code>Promise&lt;any&gt;[]</code></li><li>\u8FD4\u56DE\u6240\u6709 Promise \u6267\u884C\u540E\u7684\u8FD4\u56DE\u7ED3\u679C\uFF0C\u5BF9\u4E8E\u6BCF\u4E2A\u7ED3\u679C\u5BF9\u8C61\uFF0C\u90FD\u6709\u4E00\u4E2A status \u5B57\u7B26\u4E32\u3002\u5982\u679C\u5B83\u7684\u503C\u4E3A fulfilled\uFF0C\u5219\u7ED3\u679C\u5BF9\u8C61\u4E0A\u5B58\u5728\u4E00\u4E2A value \u3002\u5982\u679C\u503C\u4E3A rejected\uFF0C\u5219\u5B58\u5728\u4E00\u4E2A reason \u3002value\uFF08\u6216 reason \uFF09\u53CD\u6620\u4E86\u6BCF\u4E2A promise \u51B3\u8BAE\uFF08\u6216\u62D2\u7EDD\uFF09\u7684\u503C\u3002</li></ol>`,3),b=B(`<div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">allSettled</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">promises</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;">/**</span></span>
<span class="line"><span style="color:#7F848E;">   * </span><span style="color:#C678DD;">@type</span><span style="color:#7F848E;"> </span><span style="color:#E5C07B;">{{status: &#39;fulfilled&#39; | &#39;rejected&#39;, reason?: any, value?:any}[]}</span></span>
<span class="line"><span style="color:#7F848E;">   */</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">idx</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">status</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;fulfilled&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">res</span></span>
<span class="line"><span style="color:#ABB2BF;">          });</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">status</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;rejected&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">reason</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">err</span></span>
<span class="line"><span style="color:#ABB2BF;">          });</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">finally</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">promises</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre></div><h2 id="\u53C2\u8003" tabindex="-1">\u53C2\u8003 <a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a></h2><ul><li><a href="https://juejin.cn/post/7069805387490263047" target="_blank" rel="noreferrer">\u6398\u91D1\uFF1A\u5B57\u8282\u98DE\u4E66\u9762\u8BD5\u2014\u2014\u8BF7\u5B9E\u73B0 promise.all</a></li></ul>`,3),k=JSON.parse('{"title":"Promise","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u539F\u7406","slug":"\u539F\u7406","link":"#\u539F\u7406","children":[]},{"level":2,"title":"Promise.resolve","slug":"promise-resolve","link":"#promise-resolve","children":[]},{"level":2,"title":"Promise.all","slug":"promise-all","link":"#promise-all","children":[]},{"level":2,"title":"Promise.race","slug":"promise-race","link":"#promise-race","children":[]},{"level":2,"title":"Promise.any","slug":"promise-any","link":"#promise-any","children":[]},{"level":2,"title":"Promise.allSettled","slug":"promise-allsettled","link":"#promise-allsettled","children":[]},{"level":2,"title":"\u53C2\u8003","slug":"\u53C2\u8003","link":"#\u53C2\u8003","children":[]}],"relativePath":"knowledge/js/promise.md"}'),T={name:"knowledge/js/promise.md"},w=Object.assign(T,{setup(a){return(n,l)=>(u(),g("div",null,[_,t("p",null,[t("button",{class:"brand-c-button",onClick:l[0]||(l[0]=(...o)=>c(A)&&c(A)(...o))},"runPromiseAll")]),f,t("p",null,[t("button",{class:"brand-c-button",onClick:l[1]||(l[1]=(...o)=>c(C)&&c(C)(...o))},"runPromiseRace")]),v,t("p",null,[t("button",{class:"brand-c-button",onClick:l[2]||(l[2]=(...o)=>c(h)&&c(h)(...o))},"runPromiseAny")]),j,t("p",null,[t("button",{class:"brand-c-button",onClick:l[3]||(l[3]=(...o)=>c(d)&&c(d)(...o))},"runPromiseAllSettled")]),b]))}});export{k as __pageData,w as default};
